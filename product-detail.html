<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AliCare - Sản phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam:wght@400;500;700;900&display=swap" rel="stylesheet">
 <link rel="stylesheet" href="assets/css/home.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/about.css">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/menu.css">
    <link rel="stylesheet" href="assets/css/chatbot.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
         .fa-solid {
    font-family: "Font Awesome 6 Free" !important;
    }
        body { font-family: 'Be Vietnam', Arial, sans-serif; background: #f6f8fa; }
        .breadcrumb { font-size: 1.1rem; margin-bottom: 0; }
        /* Gạch chân dưới nav-link active */
.navbar-nav .nav-link.active {
    color: #2196f3 !important;
    font-weight: 700;
    position: relative;
    background: none !important;
}

    /* Đảm bảo floating-contact luôn dọc, bo góc, nổi bật */
.floating-contact {
    position: fixed !important;
    right: 32px !important;
    bottom: 32px !important;
    z-index: 10010 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-end !important;
    gap: 24px !important;
    background: transparent !important;
    border-radius: 32px !important;
    box-shadow: none !important;
    padding: 0 !important;
}

/* Style cho từng nút contact */
.floating-contact .contact-btn {
    width: 72px !important;
    height: 72px !important;
    border-radius: 50% !important;
    background: #fff !important;
    box-shadow: 0 2px 8px rgba(33,150,243,0.10) !important;
    border: 4px solid #2196f3 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
    transition: transform 0.2s, box-shadow 0.2s;
    position: static !important;
    padding: 0 !important;
}


.floating-contact .contact-btn img {
    width: 48px !important;
    height: 48px !important;
    object-fit: contain !important;
    border-radius: 50% !important;
    background: #fff !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

.floating-contact .contact-btn .material-symbols-rounded {
    font-size: 38px !important;
    color: #2196f3 !important;
    background: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

.floating-contact .contact-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 4px 16px rgba(33,150,243,0.18) !important;
}



    </style>
</head>
<body>
    <header class="bg-white shadow-sm py-2">
        <nav class="navbar navbar-expand-lg navbar-light bg-white">
            <div class="container">
                <div class="logo d-flex align-items-center">
                    <img src="assets/img/Logo/AliCare_Logo.png" alt="Logo AliCare" style="width:120px;height:100px;background:#fff;border-radius:50%;">
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="mainNavbar">
                    <ul class="navbar-nav mx-auto mb-2 mb-lg-0 text-center w-100">
                        <li class="nav-item"><a class="nav-link" href="Home.html">Trang chủ</a></li>
                        <li class="nav-item"><a class="nav-link" href="About.html">Giới thiệu</a></li>
                        <li class="nav-item"><a class="nav-link active" href="product.html">Sản phẩm</a></li>
                        <li class="nav-item"><a class="nav-link" href="Contact.html">Liên hệ</a></li>
                        <li class="nav-item"><a class="nav-link" href="FAQ.html">FAQ</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
   
    <!-- Breadcrumb -->
    <div class="container py-2" data-aos="fade-down">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0" style="font-size:1.15rem;">
                <li class="breadcrumb-item">
                    <a style="text-decoration:none;font-weight:700;color:#1E285F;" href="Home.html">Trang chủ</a>
                </li>
                <li class="breadcrumb-item">
                    <a style="text-decoration:none;font-weight:700;color:#1E285F;" href="product.html">Sản phẩm</a>
                </li>
                <li class="breadcrumb-item active" id="breadcrumb-product-title" aria-current="page" style="font-weight:700;color:#1E285F;">Tên sản phẩm</li>
            </ol>
        </nav>
    </div>
    <script>
    fetch('data/product.json')
      .then(res => res.json())
      .then(products => {
        const productId = new URLSearchParams(window.location.search).get('id');
        const product = products.find(p => p.id == productId);
        if (product) {
          // Cập nhật breadcrumb sản phẩm
          document.getElementById('breadcrumb-product-title').textContent = product.title;
        }
      });
    </script>
    <!-- Chi tiết sản phẩm -->
    <section class="container my-4" data-aos="fade-up">
    <div class="row g-4 align-items-start">
        <div class="col-md-5 d-flex align-items-center justify-content-center" style="height:600px;">
            <!-- Bootstrap Carousel giữ nguyên kích thước, có 2 ảnh, tự động chạy, không caption, không nút prev/next -->
            <div id="productImageCarousel" class="carousel slide w-100 h-100" data-bs-ride="carousel" style="max-width:100%;max-height:600px;">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#productImageCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#productImageCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                </div>
                <div class="carousel-inner" style="border-radius:8px;overflow:hidden;height:600px;">
                    <div class="carousel-item active">
                        <img src="assets/img/Sản phẩm chính/Tăm chỉ nha khoa HandyFloss 1.png"
                             class="d-block w-100 h-100"
                             style="object-fit:contain;width:100%;height:600px;background:#eee;"
                             alt="Tăm chỉ nha khoa HandyFloss">
                    </div>
                    <div class="carousel-item">
                        <img src="assets/img/Sản phẩm chính/Tăm chỉ nha khoa vị quế.png"
                             class="d-block w-100 h-100"
                             style="object-fit:contain;width:100%;height:600px;background:#eee;"
                             alt="Tăm chỉ nha khoa vị quế">
                    </div>
                </div>
            </div>
            <script>
                // Tự động chạy carousel
                document.addEventListener('DOMContentLoaded', function() {
                    var carousel = document.querySelector('#productImageCarousel');
                    if (carousel) {
                        var bsCarousel = new bootstrap.Carousel(carousel, {
                            interval: 2500,
                            ride: 'carousel',
                            pause: false,
                            wrap: true
                        });
                    }
                });
            </script>
        </div>
        <div class="col-md-7" style="padding-left: 50px;">
            <div class="fw-bold" style="color:#1E285F;font-size:2rem;">Tăm chỉ nha khoa 2in1 vị bạc hà</div>
            <div class="mb-2" style="font-weight:700;font-size:1.15rem;">23,000 VND</div>
            <div class="mb-3" style="color:#444;font-style:italic;">Tăm chỉ nha khoa 2in1 AliCare là sự kết hợp hoàn hảo giữa chỉ tơ nha khoa và đầu cạo lưỡi, giúp loại bỏ mảng bám và thức ăn thừa trong kẽ răng, đồng thời làm sạch bề mặt lưỡi – nơi tích tụ vi khuẩn gây mùi. Hương bạc hà tươi mát mang lại cảm giác sảng khoái và hơi thở thơm mát sau khi sử dụng.</div>
            <a href="https://shopee.vn/arlicare" target="_blank" class="btn px-4 py-2 rounded-pill" style="background-color: #1E285F;font-weight:700;font-size:1.1rem;color: #fff;">MUA NGAY</a>
        </div>
    </div>
</section>
    <!-- Tabs mô tả/đánh giá -->
    <section class="container mb-5" data-aos="fade-up" data-aos-delay="100">
        <div class="mt-4 p-0 rounded-4 border overflow-hidden" style="background:#f8fbff;">
            <div class="d-flex">
                <button id="tab-desc" class="flex-fill fw-bold py-3 border-0" style="background:#1E285F !important;color:#fff;font-size:1.2rem;transition:.2s;">MÔ TẢ</button>
                <button id="tab-review" class="flex-fill fw-bold py-3 border-0" style="background:#e3f6fd;color:#1E285F;font-size:1.2rem;transition:.2s;">ĐÁNH GIÁ</button>
            </div>
            <div id="tab-content" class="p-4 bg-white" style="min-height:220px;"></div>
        </div>
    </section>
    <section class="py-4" style="background:transparent;" data-aos="fade-up" data-aos-delay="200">
        <div class="container">
            <div class="p-4 d-flex flex-column flex-md-row align-items-center justify-content-between" style="background:#1E285F;border-radius:20px;">
                <div class="mb-3 mb-md-0 d-flex flex-column align-items-start">
                    <div class="text-white" style="font-size:1.5rem;font-weight:700;">Liên hệ với chúng tôi ngay</div>
                    <div class="text-white" style="font-size:1rem;font-weight:400;">Để được hỗ trợ tư vấn!</div>
                </div>
                <a href="#" class="btn btn-outline-light px-4 py-2 rounded-pill ms-md-4" style="font-weight:700;color:#1E285F;background:#fff;border:2px solid #fff;">Nhận tư vấn ngay</a>
            </div>
        </div>
    </section>
    <!-- Footer mới -->
    <footer class="footer-section pt-4" style="background:#fff;">
        <div class="container">
            <div class="row align-items-start pb-2">
                <!-- Logo và thông tin công ty -->
                <div class="col-md-6 mb-3 mb-md-0">
                    <div class="d-flex align-items-center mb-2">
                        <img src="assets/img/Logo/AliCare_Horizontal.png" style="width:30%;height:40px;">
                    </div>
                    <div class="fw-bold" style="color:#1E285F;">CÔNG TY TNHH ALICARE</div>
                    <div style="color:#222;"><i class="fa-solid fa-location-dot" style="display:inline-block;"></i> Xóm 2, Hải Xuân, Hải Hậu, Nam Định</div>
                    <div class="mb-1" style="color:#222;"><i class="fa-solid fa-phone" style="display:inline-block;"></i> 0372499187</div>
                    <div class="mb-1" style="color:#222;"><i class="fa-solid fa-envelope" style="display:inline-block;"></i> info@alicare.io.vn</div>
                    <div class="fw-bold mt-2 mb-1" style="color:#222;">KẾT NỐI VỚI CHÚNG TÔI</div>
                </div>
                <!-- Hỗ trợ khách hàng -->
                <div class="col-md-6 mb-3 mb-md-0">
                    <div class="fw-bold" style="font-size:1.2rem;">HỖ TRỢ KHÁCH HÀNG</div>
                    <div><a href="#" style="color:#222;text-decoration:none;">Chính sách bảo mật</a></div>
                    <div><a href="#" style="color:#222;text-decoration:none;">Điều khoản sử dụng</a></div>
                </div>
            </div>
            <hr style="margin:0 0 8px 0;opacity:.5;">
            <div class="text-center small text-muted pb-2">© 2025 All Rights Reserved</div>
        </div>
    </footer>
    <div class="floating-contact">
    <a href="https://zalo.me/yourzalo" target="_blank" class="contact-btn zalo">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQq9M6V08Mvxd3OORurB4xNIKudVqwzq0taGQ&s" alt="Zalo" />
    </a>
    <a href="https://www.facebook.com/alicare.vn" target="_blank" class="contact-btn messenger">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/2023_Facebook_icon.svg/2048px-2023_Facebook_icon.svg.png" alt="Messenger" />
    </a>
    <button id="chatbot-toggler" class="contact-btn chatbot" type="button">
        <span class="material-symbols-rounded">mode_comment</span>
        <span class="material-symbols-rounded">close</span>
    </button>
</div>
<div class="chatbot-popup">
  <div class="chat-header">
    <div class="header-info">
      <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
        <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"/>
      </svg>
      <h2 class="logo-text">Alicare</h2>
    </div>
    <button id="close-chatbot" class="material-symbols-rounded">keyboard_arrow_down</button>
  </div>
  <div class="chat-body">
    <div class="message bot-message">
      <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
        <path d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"/>
      </svg>
      <div class="message-text"> Xin chào 👋<br /> Tôi có thể giúp gì cho bạn hôm nay? </div>
    </div>
  </div>
  <div class="chat-footer">
    <form action="#" class="chat-form">
      <textarea placeholder="Message..." class="message-input" required></textarea>
      <div class="chat-controls">
        <button type="button" id="emoji-picker" class="material-symbols-outlined">sentiment_satisfied</button>
        <div class="file-upload-wrapper">
          <input type="file" id="file-input" hidden />
          <img src="#" />
          <button type="button" id="file-upload" class="material-symbols-rounded">attach_file</button>
          <button type="button" id="file-cancel" class="material-symbols-rounded">close</button>
        </div>
        <button type="submit" id="send-message" class="material-symbols-rounded">arrow_upward</button>
      </div>
    </form>
  </div>
</div>
<!-- Nhúng các file JS/CSS cần thiết cho chatbot -->
<link rel="stylesheet" href="assets/css/chatbot.css" />
<script src="assets/js/chatbot.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.17.2/dist/sweetalert2.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />

</style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/custom.js"></script>
    <script>
    // Dữ liệu mô tả và đánh giá mẫu
    const productDetail = {
      name: "Tăm chỉ nha khoa hương bạc hà – Giải pháp chăm sóc răng miệng toàn diện",
      desc: "Tăm chỉ nha khoa hương bạc hà của AliCare là sự kết hợp hoàn hảo giữa chỉ tơ nha khoa và tăm xỉa răng, giúp làm sạch hiệu quả các mảng bám trong kẽ răng mà bàn chải thông thường khó tiếp cận. Sản phẩm mang đến hương bạc hà tươi mát, giúp hơi thở thơm mát và cảm giác sảng khoái sau khi sử dụng.",
      highlight: [
        "Làm sạch mảng bám và thức ăn thừa ở những vị trí khó tiếp cận.",
        "Ngăn ngừa sâu răng và viêm nướu bằng cách duy trì vệ sinh răng miệng hàng ngày.",
        "Hương bạc hà tươi mát, mang lại cảm giác dễ chịu sau khi sử dụng.",
        "Thiết kế tiện lợi, dễ dàng mang theo và sử dụng mọi lúc, mọi nơi."
      ],
      info: [
        "Chất liệu: Nhựa HIPS, sợi chỉ UHMWPE",
        "Kích thước: 2cm x 3.2cm",
        "Tiêu chuẩn: TCCS2022",
        "Số công bố: 220000012/PCBA-TB",
        "Chứng nhận: ISO 13485:2016"
      ],
      guide: [
        "Dùng đầu chỉ nha khoa để nhẹ nhàng làm sạch kẽ răng, loại bỏ mảng bám và thức ăn thừa.",
        "Sử dụng đầu tăm để làm sạch các vùng khó tiếp cận hoặc loại bỏ mảng bám cứng đầu.",
        "Sử dụng phần răng cạo để loại bỏ vi khuẩn trên rêu lưỡi.",
        "Sử dụng hằng ngày sau khi ăn hoặc theo chỉ dẫn của nha sĩ để duy trì sức khỏe răng miệng tốt nhất."
      ]
    };
    const reviews = [
      {name:'Hoan123', content:'Sản phẩm tiện lợi.', rating:5, time:'5 ngày trước'},
      {name:'Minhank201', content:'Tiện lợi, sạch sẽ, dễ mang theo – rất hài lòng!', rating:5, time:'1 tháng trước'},
      {name:'Khánh Nguyễn', content:'Beautiful recipe. Thank you!', rating:4, time:'1 tuần trước'}
    ];
    function setActiveTab(tab) {
      document.getElementById('tab-desc').style.background = tab === 'desc' ? '#1E285F' : '#f8fbff';
      document.getElementById('tab-desc').style.color = tab === 'desc' ? '#fff' : '#1E285F';
      document.getElementById('tab-review').style.background = tab === 'review' ? '#1E285F' : '#f8fbff';
      document.getElementById('tab-review').style.color = tab === 'review' ? '#fff' : '#1E285F';
    }
    function renderTabContent(tab) {
      const el = document.getElementById('tab-content');
      if(tab==='desc') {
        el.innerHTML = `
          <div class="mb-3">
            <div class="fw-bold" style="font-size:1.1rem;">${productDetail.name}</div>
            <div style="color:#444;">${productDetail.desc}</div>
          </div>
          <div class="mb-3">
            <div class="fw-bold mb-2" style="color:#219653;font-size:1.08rem;"><span style='font-size:1.3em;'>✅</span> Công dụng nổi bật:</div>
            <ul style="padding-left:1.2em;">
              ${productDetail.highlight.map(h=>`<li style='margin-bottom:4px;'>${h}</li>`).join('')}
            </ul>
          </div>
          <div class="mb-3">
            <div class="fw-bold mb-2" style="color:#8d6e63;font-size:1.08rem;"><span style='font-size:1.2em;'>📦</span> Thông số sản phẩm:</div>
            <ul style="padding-left:1.2em;">
              ${productDetail.info.map(i=>`<li>${i}</li>`).join('')}
            </ul>
          </div>
          <div>
            <div class="fw-bold mb-2" style="color:#1565c0;font-size:1.08rem;"><span style='font-size:1.2em;'>🦷</span> Hướng dẫn sử dụng:</div>
            <ul style="padding-left:1.2em;">
              ${productDetail.guide.map(g=>`<li>${g}</li>`).join('')}
            </ul>
          </div>
        `;
      } else {
        el.innerHTML = `
          <div class="mb-3">
            <div class="fw-bold mb-2">Nhận xét</div>
            <form class="bg-light p-3 rounded-3 mb-4">
              <div class="row g-2 align-items-center mb-2">
                <div class="col-md-3"><input class="form-control" placeholder="Tên"></div>
                <div class="col-md-3"><input class="form-control" placeholder="Email"></div>
                <div class="col-md-6"><input class="form-control" placeholder="Viết nhận xét"></div>
              </div>
              <div class="row g-2 align-items-center mb-2">
                <div class="col-md-3">Bánh giá
                  <span style="font-size:1.2em;color:#fbc02d;">&#9733;&#9733;&#9733;&#9733;&#9734;</span>
                </div>
                <div class="col-md-9 text-end"><button class="btn btn-dark px-4">Post Review</button></div>
              </div>
            </form>
            <div class="fw-bold mb-2">Mô tả</div>
            <div>
              ${reviews.map(r=>`
                <div class='d-flex align-items-center mb-3'>
                  <div style='width:38px;height:38px;background:#ccc;border-radius:50%;margin-right:12px;'></div>
                  <div style='flex:1;'>
                    <div class='fw-bold'>${r.name}</div>
                    <div class='small text-muted mb-1'>${r.content}</div>
                    <div class='small text-muted'>${r.time} &nbsp; <span style="color:#fbc02d;">${'★'.repeat(r.rating)}${'☆'.repeat(5-r.rating)}</span></div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }
    }
    document.getElementById('tab-desc').onclick = function() {
      setActiveTab('desc');
      renderTabContent('desc');
    };
    document.getElementById('tab-review').onclick = function() {
      setActiveTab('review');
      renderTabContent('review');
    };
    // Mặc định hiển thị tab mô tả
    setActiveTab('desc');
    renderTabContent('desc');
    // Đảm bảo menu Sản phẩm luôn active
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.navbar-nav .nav-link').forEach(function(link) {
        if(link.textContent.trim().toLowerCase() === 'sản phẩm') {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    });
    </script>
    <script>
function getQueryParam(name) {
  const url = new URL(window.location.href);
  return url.searchParams.get(name);
}

const productId = getQueryParam('id');
fetch('data/product.json')
  .then(res => res.json())
  .then(products => {
    const product = products.find(p => p.id == productId);
    if (!product) return;

    // Cập nhật tiêu đề, giá, mô tả
    document.querySelector('.fw-bold[style*="font-size:2rem"]').textContent = product.title;
    document.querySelector('.mb-2[style*="font-size:1.15rem"]').textContent = product.price;
    document.querySelector('.mb-3[style*="font-style:italic"]').textContent = product.description;

    // Cập nhật carousel ảnh
    const carouselInner = document.querySelector('.carousel-inner');
    const carouselIndicators = document.querySelector('.carousel-indicators');
    if (carouselInner && carouselIndicators && product.images) {
      carouselInner.innerHTML = product.images.map((img, idx) => `
        <div class="carousel-item${idx === 0 ? ' active' : ''}">
          <img src="${img}" class="d-block w-100 h-100"
            style="object-fit:contain;width:100%;height:600px;background:#eee;" alt="${product.title}">
        </div>
      `).join('');
      carouselIndicators.innerHTML = product.images.map((img, idx) => `
        <button type="button" data-bs-target="#productImageCarousel" data-bs-slide-to="${idx}" ${idx===0?'class="active" aria-current="true"':''} aria-label="Slide ${idx+1}"></button>
      `).join('');
    }

    // Tabs: mô tả, công dụng, thông số, hướng dẫn
    const tabContent = document.getElementById('tab-content');
    function renderDesc() {
      tabContent.innerHTML = `
        <div class="mb-3">
          <div class="fw-bold" style="font-size:1.1rem;">${product.title}</div>
          <div style="color:#444;">${product.description}</div>
        </div>
        <div class="mb-3">
          <div class="fw-bold mb-2" style="color:#219653;font-size:1.08rem;"><span style='font-size:1.3em;'>✅</span> Công dụng nổi bật:</div>
          <ul style="padding-left:1.2em;">
            ${product.features.map(h=>`<li style='margin-bottom:4px;'>${h}</li>`).join('')}
          </ul>
        </div>
        <div class="mb-3">
          <div class="fw-bold mb-2" style="color:#8d6e63;font-size:1.08rem;"><span style='font-size:1.2em;'>📦</span> Thông số sản phẩm:</div>
          <ul style="padding-left:1.2em;">
            ${Object.entries(product.specs).map(([k,v])=>`<li><b>${k}:</b> ${v}</li>`).join('')}
          </ul>
        </div>
        <div>
          <div class="fw-bold mb-2" style="color:#1565c0;font-size:1.08rem;"><span style='font-size:1.2em;'>🦷</span> Hướng dẫn sử dụng:</div>
          <ul style="padding-left:1.2em;">
            ${product.usage.map(g=>`<li>${g}</li>`).join('')}
          </ul>
        </div>
      `;
    }
    // Gán lại sự kiện tab
    document.getElementById('tab-desc').onclick = function() {
      setActiveTab('desc');
      renderDesc();
    };
    document.getElementById('tab-review').onclick = function() {
      setActiveTab('review');
      renderTabContent('review');
    };






      renderDesc(); // Hiển thị lại nội dung mô tả sản phẩm
      setActiveTab('desc');
      renderDesc(); // Hiển thị lại nội dung mô tả sản phẩm
      setActiveTab('desc');
    }
    
  );
  
</script>
<script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatbotToggler = document.querySelector('#chatbot-toggler');
            const closeChatbot = document.querySelector('#close-chatbot');
            
            if (chatbotToggler) {
                chatbotToggler.addEventListener('click', function() {
                    document.body.classList.toggle('show-chatbot');
                });
            }
            
            if (closeChatbot) {
                closeChatbot.addEventListener('click', function() {
                    document.body.classList.remove('show-chatbot');
                });
            }
        });
    </script>
</body></html>